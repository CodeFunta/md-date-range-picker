(function(e,t){function n(){var e={scope:{selectedTemplate:"=",selectedTemplateName:"=",dateStart:"=",dateEnd:"=",firstDayOfWeek:"=?",showTemplate:"=?"},template:'<div class="md-date-range-picker md-whiteframe-1dp"><md-toolbar class="md-primary" layout="row" layout-align="start center"><md-button aria-label="Date Range Picker" class="md-icon-button" aria-hidden="true" ng-disabled="true"><md-icon md-svg-icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik05IDExSDd2Mmgydi0yem00IDBoLTJ2Mmgydi0yem00IDBoLTJ2Mmgydi0yem0yLTdoLTFWMmgtMnYySDhWMkg2djJINWMtMS4xMSAwLTEuOTkuOS0xLjk5IDJMMyAyMGMwIDEuMS44OSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0wIDE2SDVWOWgxNHYxMXoiLz4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KPC9zdmc+"></md-icon></md-button><span class="md-toolbar-tools">{{ctrl.selectedDateText()}}</span></md-toolbar><div layout="column"><div layout="row" layout-margin><div class="md-date-range-picker__calendar-wrapper"><div class="md-date-range-picker__month-year" layout="row" layout-align="center center"><div flex layout="column" layout-align="center center"><md-button aria-label="Previous Month" class="md-icon-button" ng-click="ctrl.handleClickPrevMonth($event)"><md-icon md-svg-src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwb2x5Z29uIHBvaW50cz0iMTUuNCw3LjQgMTQsNiA4LDEyIDE0LDE4IDE1LjQsMTYuNiAxMC44LDEyICIvPjwvZz48L3N2Zz4="></md-icon></md-button></div><md-select md-on-close="ctrl.updateActiveDate()" ng-model="ctrl.activeMonth" placeholder="Month" class="md-no-underline"><md-option ng-value="month.id" ng-repeat="month in ctrl.months" ng-bind="month.name"></md-option></md-select><md-select md-on-close="ctrl.updateActiveDate()" ng-model="ctrl.activeYear" placeholder="Year" class="md-no-underline"><md-option ng-value="year.id" ng-repeat="year in ctrl.years" ng-bind="year.name"></md-option></md-select><div flex layout="column" layout-align="center center" class="hide-gt-sm"><md-button aria-label="Next Month" class="md-icon-button" ng-click="ctrl.handleClickNextMonth($event)"><md-icon style="transform: rotate(-180deg)" md-svg-src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwb2x5Z29uIHBvaW50cz0iMTUuNCw3LjQgMTQsNiA4LDEyIDE0LDE4IDE1LjQsMTYuNiAxMC44LDEyICIvPjwvZz48L3N2Zz4="></md-icon></md-button></div><div flex layout="column" layout-align="center center" class="hide show-gt-sm"><md-button aria-label="Next Month" ng-disabled="true" aria-hidden="true" class="md-icon-button"><md-icon></md-icon></md-button></div></div><div class="md-date-range-picker__week" style="font-size: 0"><span class="md-date-range-picker__calendar__grid" ng-repeat="day in ctrl.days">{{day.name}}</span></div><div class="md-date-range-picker__calendar"><span ng-repeat="date in ctrl.dates" class="md-date-range-picker__calendar__grid" ng-class="{\'md-date-range-picker__calendar__selected\':ctrl.inSelectedDateRange(date), \'md-date-range-picker__calendar__start\':ctrl.isSelectedStartDate(date), \'md-date-range-picker__calendar__end\':ctrl.isSelectedEndDate(date), \'md-date-range-picker__calendar__not-in-active-month\': !ctrl.inCurrentMonth(date), \'md-date-range-picker__calendar__today\' : ctrl.isToday(date) }" ng-click="ctrl.handleClickDate($event, date)"><span class="md-date-range-picker__calendar__selection" ng-bind="{{::date.getDate()}}"></span></span></div></div><div class="md-date-range-picker__calendar-wrapper hide show-gt-sm"><div class="md-date-range-picker__month-year" layout="row" layout-align="center center"><div flex layout="column" layout-align="center center" style="visibility: hidden"><md-button aria-label="Previous Month" class="md-icon-button" ng-click="ctrl.handleClickPrevMonth($event)"><md-icon md-svg-src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwb2x5Z29uIHBvaW50cz0iMTUuNCw3LjQgMTQsNiA4LDEyIDE0LDE4IDE1LjQsMTYuNiAxMC44LDEyICIvPjwvZz48L3N2Zz4="></md-icon></md-button></div><md-select md-on-close="ctrl.updateActiveDate(true)" ng-model="ctrl.activeMonth2" placeholder="Month" class="md-no-underline"><md-option ng-value="month.id" ng-repeat="month in ctrl.months" ng-bind="month.name"></md-option></md-select><md-select md-on-close="ctrl.updateActiveDate(true)" ng-model="ctrl.activeYear2" placeholder="Year" class="md-no-underline"><md-option ng-value="year.id" ng-repeat="year in ctrl.years" ng-bind="year.name"></md-option></md-select><div flex layout="column" layout-align="center center"><md-button aria-label="next-month" class="md-icon-button" ng-click="ctrl.handleClickNextMonth($event)"><md-icon style="transform: rotate(-180deg)" md-svg-src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwb2x5Z29uIHBvaW50cz0iMTUuNCw3LjQgMTQsNiA4LDEyIDE0LDE4IDE1LjQsMTYuNiAxMC44LDEyICIvPjwvZz48L3N2Zz4="></md-icon></md-button></div></div><div class="md-date-range-picker__week" style="font-size: 0"><span class="md-date-range-picker__calendar__grid" ng-repeat="day in ctrl.days">{{day.name}}</span></div><div class="md-date-range-picker__calendar"><span ng-repeat="date in ctrl.dates2" class="md-date-range-picker__calendar__grid" ng-class="{\'md-date-range-picker__calendar__selected\':ctrl.inSelectedDateRange(date), \'md-date-range-picker__calendar__start\':ctrl.isSelectedStartDate(date), \'md-date-range-picker__calendar__end\':ctrl.isSelectedEndDate(date), \'md-date-range-picker__calendar__not-in-active-month\': !ctrl.inCurrentMonth(date, true), \'md-date-range-picker__calendar__today\' : ctrl.isToday(date) }" ng-click="ctrl.handleClickDate($event, date)"><span class="md-date-range-picker__calendar__selection" ng-bind="{{::date.getDate()}}"></span></span></div></div></div><div class="md-date-range-picker__templates" ng-if="ctrl.showTemplate"><div class="hide show-gt-sm" layout="row"><div flex layout="column"><md-button aria-label="Today" ng-class="ctrl.selectedTemplate === \'TD\' ? \'md-primary md-raised\' : \'\'" ng-click="ctrl.handleClickSelectToday()">Today</md-button><md-button aria-label="Yesterday" ng-class="ctrl.selectedTemplate === \'YD\' ? \'md-primary md-raised\' : \'\'" ng-click="ctrl.handleClickSelectYesterday()">Yesterday</md-button></div><div flex layout="column"><md-button aria-label="This Week" ng-class="ctrl.selectedTemplate === \'TW\' ? \'md-primary md-raised\' : \'\'" ng-click="ctrl.handleClickSelectThisWeek()">This Week</md-button><md-button aria-label="Last Week" ng-class="ctrl.selectedTemplate === \'LW\' ? \'md-primary md-raised\' : \'\'" ng-click="ctrl.handleClickSelectLastWeek()">Last Week</md-button></div><div flex layout="column"><md-button aria-label="This Month" ng-class="ctrl.selectedTemplate === \'TM\' ? \'md-primary md-raised\' : \'\'" ng-click="ctrl.handleClickSelectThisMonth()">This Month</md-button><md-button aria-label="Last Month" ng-class="ctrl.selectedTemplate === \'LM\' ? \'md-primary md-raised\' : \'\'" ng-click="ctrl.handleClickSelectLastMonth()">Last Month</md-button></div><div flex layout="column"><md-button aria-label="This Year" ng-class="ctrl.selectedTemplate === \'TY\' ? \'md-primary md-raised\' : \'\'" ng-click="ctrl.handleClickSelectThisYear()">This Year</md-button><md-button aria-label="Last Year" ng-class="ctrl.selectedTemplate === \'LY\' ? \'md-primary md-raised\' : \'\'" ng-click="ctrl.handleClickSelectLastYear()">Last Year</md-button></div></div><div class="hide-gt-sm" layout="column" layout-padding><md-input-container><label>Date Range Template</label><md-select class="md-block" placeholder="Custom Date Range" ng-model="ctrl.selectedTemplate"><md-option value=""></md-option><md-option aria-label="Today" value="TD" ng-click="ctrl.handleClickSelectToday()">Today</md-option><md-option aria-label="Yesterday" value="YD" ng-click="ctrl.handleClickSelectYesterday()">Yesterday</md-option><md-option aria-label="This Week" value="TW" ng-click="ctrl.handleClickSelectThisWeek()">This Week</md-option><md-option aria-label="Last Week" value="LW" ng-click="ctrl.handleClickSelectLastWeek()">Last Week</md-option><md-option aria-label="This Month" value="TM" ng-click="ctrl.handleClickSelectThisMonth()">This Month</md-option><md-option aria-label="Last Month" value="LM" ng-click="ctrl.handleClickSelectLastMonth()">Last Month</md-option><md-option aria-label="This Year" value="TY" ng-click="ctrl.handleClickSelectThisYear()">This Year</md-option><md-option aria-label="Last Year" value="LY" ng-click="ctrl.handleClickSelectLastYear()">Last Year</md-option></md-select></md-input-container></div></div></div></div>',controllerAs:"ctrl",bindToController:!0,controller:r,link:i};return e}function r(e,t){function u(){var e=0;if(n.selectedTemplate)switch(n.selectedTemplate){case"TD":n.handleClickSelectToday();break;case"YD":n.handleClickSelectYesterday();break;case"TW":n.handleClickSelectThisWeek();break;case"LW":n.handleClickSelectLastWeek();break;case"TM":n.handleClickSelectThisMonth();break;case"LM":n.handleClickSelectLastMonth();break;case"TY":n.handleClickSelectThisYear();break;case"LY":n.handleClickSelectLastYear();break;default:n.updateActiveDate()}else n.updateActiveDate();var r=new Date(2017,0,1);n.days=[];for(e=0;e<7;e++)r.setDate(e+1+n.firstDayOfWeek),n.days.push({id:e,name:t("date")(r,"EEE")});var i=new Date;i.setDate(1),n.months=[];for(e=0;e<12;e++)i.setMonth(e),n.months.push({id:e,name:t("date")(i,"MMMM")});var s=n.activeYear,o=0;n.years=[];for(o=s-10;o<s+10;o++)n.years.push({id:o,name:o})}function a(e){var t=[],r=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=new Date(e.getFullYear(),e.getMonth(),1-(r.getDay()-n.firstDayOfWeek)),o=new Date(e.getFullYear(),e.getMonth()+1,7-(i.getDay()-n.firstDayOfWeek)),u=s;while(u<o)t.push(u),u=new Date(u.getFullYear(),u.getMonth(),u.getDate()+1);return t}function f(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return r-n}function l(e,t){var n=new Array(7),r=t||0;return n[0]="Sun",n[1]="Mon",n[2]="Tue",n[3]="Wed",n[4]="Thu",n[5]="Fri",n[6]="Sat",n[e+r%7]}function c(e,t){return t?e.getMonth()===n.activeMonth2:e.getMonth()===n.activeMonth}function h(e,t){f(n.dateStart,n.dateEnd)===0?f(n.dateStart,t)>0?n.dateEnd=t:n.dateStart=t:(n.dateStart=t,n.dateEnd=t),n.selectedTemplate=!1,n.selectedTemplateName=n.selectedDateText()}function p(e){return f(n.dateStart,e)>=0&&0<=f(e,n.dateEnd)}function d(e){var t=new Date(this.activeYear,this.activeMonth,1),r=new Date(this.activeYear2,this.activeMonth2,1);e?(t=new Date(this.activeYear2,this.activeMonth2-1,1),this.activeYear=t.getFullYear(),this.activeMonth=t.getMonth()):(r=new Date(this.activeYear,this.activeMonth+1,1),this.activeYear2=r.getFullYear(),this.activeMonth2=r.getMonth()),n.focusToDate(t)}function v(e){var t=new Date(n.activeDate.getFullYear(),n.activeDate.getMonth()+1,1);n.focusToDate(t)}function m(e){var t=new Date(n.activeDate.getFullYear(),n.activeDate.getMonth()-1,1);n.focusToDate(t)}function g(){var e=r,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.dateStart=t,n.dateEnd=t,n.selectedTemplate="TD",n.selectedTemplateName=n.selectedDateText(),n.focusToDate(e)}function y(){var e=r,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-1);n.dateStart=t,n.dateEnd=t,n.selectedTemplate="YD",n.selectedTemplateName=n.selectedDateText(),n.focusToDate(e)}function b(){var e=r,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()-(t.getDay()-n.firstDayOfWeek)),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()+(6-t.getDay()+n.firstDayOfWeek));n.dateStart=i,n.dateEnd=s,n.selectedTemplate="TW",n.selectedTemplateName=n.selectedDateText(),n.focusToDate(t)}function w(){var e=r,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()-(t.getDay()-n.firstDayOfWeek)),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()+(6-t.getDay()+n.firstDayOfWeek));n.dateStart=i,n.dateEnd=s,n.selectedTemplate="LW",n.selectedTemplateName=n.selectedDateText(),n.focusToDate(t)}function E(){var e=r,t=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()+1,0);n.dateStart=t,n.dateEnd=i,n.selectedTemplate="TM",n.selectedTemplateName=n.selectedDateText(),n.focusToDate(e)}function S(){var e=r,t=new Date(e.getFullYear(),e.getMonth()-1,e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),1),s=new Date(t.getFullYear(),t.getMonth()+1,0);n.dateStart=i,n.dateEnd=s,n.selectedTemplate="LM",n.selectedTemplateName=n.selectedDateText(),n.focusToDate(t)}function x(){var e=r,t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),11,31);n.dateStart=t,n.dateEnd=i,n.selectedTemplate="TY",n.selectedTemplateName=n.selectedDateText(),n.focusToDate(t)}function T(){var e=r,t=new Date(e.getFullYear()-1,0,1),i=new Date(e.getFullYear()-1,11,31);n.dateStart=t,n.dateEnd=i,n.selectedTemplate="LY",n.selectedTemplateName=n.selectedDateText(),n.focusToDate(t)}function N(e){return f(n.dateStart,e)===0}function C(e){return f(n.dateEnd,e)===0}function k(e){return f(e,r)===0}function L(){return n.selectedTemplate?s[n.selectedTemplate]:f(n.dateStart,n.dateEnd)===0?t("date")(n.dateStart,"dd MMM"+(n.dateStart.getFullYear()!==r.getFullYear()?" yyyy":"")):t("date")(n.dateStart,"dd"+(n.dateStart.getMonth()!==n.dateEnd.getMonth()?" MMM":"")+(n.dateStart.getFullYear()!==r.getFullYear()||n.dateEnd.getFullYear()!==r.getFullYear()?" yyyy":""))+" - "+t("date")(n.dateEnd,"dd MMM yyyy")}function A(e){var t=new Date(e.getFullYear(),e.getMonth()+1,1);n.activeDate=e,n.activeMonth=e.getMonth(),n.activeYear=e.getFullYear(),n.activeDate2=t,n.activeMonth2=t.getMonth(),n.activeYear2=t.getFullYear(),n.dates=a(e),n.dates2=a(t)}var n=this,r=new Date,i=2,s={TD:"Today",YD:"Yesterday",TW:"This Week",LW:"Last Week",TM:"This Month",LM:"Last Month",TY:"This Year",LY:"Last Year"},o=1;this.days=[],this.label="Date range picker",this.dates=[],this.dates2=[],this.firstDayOfWeek=this.firstDayOfWeek||o,this.numberOfMonthToDisplay=2,this.today=new Date,this.dateStart=this.dateStart||r,this.dateEnd=this.dateEnd||r,this.firstDayOfMonth=new Date(this.dateStart.getFullYear(),this.dateStart.getMonth(),1),this.lastDayOfMonth=new Date(this.dateStart.getFullYear(),this.dateStart.getMonth()+1,0),this.activeDate=this.dateStart,this.activeDate2=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth()+1,1),this.activeMonth=this.activeDate.getMonth(),this.activeYear=this.activeDate.getFullYear(),this.activeMonth2=this.activeDate2.getMonth(),this.activeYear2=this.activeDate2.getFullYear(),this.months=[],this.years=[],this.selectedTemplate=this.selectedTemplate,this.inCurrentMonth=c,this.isToday=k,this.handleClickDate=h,this.inSelectedDateRange=p,this.isSelectedStartDate=N,this.isSelectedEndDate=C,this.updateActiveDate=d,this.selectedDateText=L,this.focusToDate=A,this.handleClickNextMonth=v,this.handleClickPrevMonth=m,this.handleClickSelectToday=g,this.handleClickSelectYesterday=y,this.handleClickSelectThisWeek=b,this.handleClickSelectLastWeek=w,this.handleClickSelectThisMonth=E,this.handleClickSelectLastMonth=S,this.handleClickSelectThisYear=x,this.handleClickSelectLastYear=T,u()}function i(e){}function s(e,n){function i(r){return e(function(e,i){n.show({locals:{mdDateRangePickerServiceModel:t.copy(r.model)},controller:["$scope","mdDateRangePickerServiceModel",function(e,t){var r=this;r.model=t||{},r.model.selectedTemplateName=r.model.selectedTemplateName||"",r.ok=function(){n.hide(r.model)},r.cancel=function(){n.hide(!1)}}],controllerAs:"vm",template:['<md-dialog aria-label="Date Range Picker">',"<md-dialog-content>","<md-date-range-picker ",'date-start="vm.model.dateStart" ','date-end="vm.model.dateEnd" ','show-template="vm.model.showTemplate" ','selected-template="vm.model.selectedTemplate" ','selected-template-name="vm.model.selectedTemplateName"',">","</md-date-range-picker>","</md-dialog-content>",'<md-dialog-actions layout="row" layout-align="end center">','<md-button ng-click="vm.cancel()">Cancel</md-button>','<md-button class="md-raised md-primary" ng-click="vm.ok()">Ok</md-button>',"</md-dialog-actions>","</md-dialog>"].join(""),parent:t.element(document.body),targetEvent:r.targetEvent,clickOutsideToClose:!0,fullscreen:r.model.fullscreen}).then(function(t){e(t)},function(){i(!1)})})}var r=this;r.show=i}t.module("ngMaterialDateRangePicker",["ngMaterial"]).directive("mdDateRangePicker",n).service("$mdDateRangePicker",s),r.$inject=["$scope","$filter"],s.$inject=["$q","$mdDialog"]})(window,angular)